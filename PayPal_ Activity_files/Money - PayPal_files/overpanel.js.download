define(["jquery","BaseView"],function(e,t){"use strict";function n(t){var n=e(t)[0],r=/\boverpanel\b/,i=r.test(n.className)?e(n):null;while(!i)n=n.parentNode,r.test(n.className)&&(i=e(n));return i}var r=t.extend({el:"body",events:{"click a.toggle-overpanel":"toggleOverpanel"},toggleOverpanel:function(t){var r=e(t.currentTarget).attr("href"),i,s,o,u=t.handleObj.handler;t.preventDefault(),i=n(r?e(r):e(t.currentTarget)),i&&(s=i.find(".lastChild"),o=i.find('input:not([type="hidden"])'),i.hasClass("in")?(o.off(),s.off(),i.removeClass("in"),e(document.body).removeClass("overpanel-in"),i.find(".close").off("click"),i.find(".cancel").off("click")):(i.find(".close").on("click",u),i.find(".cancel").on("click",u),o.focus(function(t){var r=e(t.currentTarget).closest(".textInput"),i,s,o,u;r=r.length?r:e(t.currentTarget),i=n(r),s=i.find('input:not([type="hidden"])'),u=s.length;while(u-->0)o=e(s[u]).closest(".textInput")||s[u],o&&o.removeClass("active");r&&r.addClass("active")}),s.on("focus",function(){o[0].focus()}),o[0].focus(),window.scrollTo(0,0),i.addClass("in"),e(document.body).addClass("overpanel-in")))}});return r});